<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get Qr</title>
    <script type="text/javascript" src="https://unpkg.com/qr-code-styling@1.5.0/lib/qr-code-styling.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-body: #f3f8fc;
            --primary: #4f46e5;
            --accent: #f43f5e;
            --text: #1e293b;
            --card-bg: #ffffff;
            --shadow-soft: 0 10px 30px -5px rgba(0,0,0,0.06);
            --border-soft: 1px solid #f1f5f9;
        }

        * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-body);
            color: var(--text);
            margin: 0; padding: 20px;
            min-height: 100vh;
            display: flex; justify-content: center;
        }

        .container {
            width: 100%; max-width: 1200px;
            display: grid; grid-template-columns: 1fr 420px;
            gap: 30px; align-items: start;
        }

        /* --- LEFT PANEL --- */
        .config-panel { display: flex; flex-direction: column; gap: 20px; }

        .header-box h1 {
            font-size: 2.2rem; font-weight: 800; margin: 0;
            background: linear-gradient(135deg, #4f46e5, #8b5cf6);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .header-box p { color: #64748b; margin: 5px 0 0; font-weight: 600; }

        .card {
            background: var(--card-bg); border-radius: 24px; padding: 25px;
            box-shadow: var(--shadow-soft); border: var(--border-soft);
        }

        .card-header {
            display: flex; align-items: center; gap: 10px; margin-bottom: 20px;
            padding-bottom: 15px; border-bottom: 1px dashed #e2e8f0;
        }
        .card-header i { font-size: 1.2rem; color: var(--primary); background: #eef2ff; padding: 8px; border-radius: 8px; }
        .card-header span { font-weight: 700; font-size: 1.1rem; }

        label { display: block; font-size: 0.85rem; font-weight: 700; margin-bottom: 8px; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px; }

        input[type="text"], select {
            width: 100%; padding: 12px 16px; border-radius: 12px;
            border: 2px solid #e2e8f0; background: #f8fafc;
            font-family: inherit; font-size: 0.95rem; color: var(--text);
            transition: 0.2s; cursor: pointer;
        }
        input[type="text"]:focus, select:focus {
            border-color: var(--primary); background: #fff;
            box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.1);
        }

        /* Drag & Drop */
        .drop-zone {
            border: 2px dashed #cbd5e1; border-radius: 16px; padding: 25px;
            text-align: center; cursor: pointer; background: #f8fafc; position: relative; transition: 0.3s;
        }
        .drop-zone:hover { border-color: var(--primary); background: #eef2ff; }
        .drop-zone.has-file { border-color: #10b981; background: #ecfdf5; }
        .drop-zone i { font-size: 2rem; color: #94a3b8; margin-bottom: 10px; }
        .drop-zone input { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; }

        /* Sliders */
        input[type="range"] { width: 100%; -webkit-appearance: none; background: transparent; margin: 10px 0; }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none; height: 18px; width: 18px; border-radius: 50%;
            background: var(--primary); border: 2px solid #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.2); cursor: pointer; margin-top: -7px;
        }
        input[type="range"]::-webkit-slider-runnable-track {
            width: 100%; height: 4px; background: #e2e8f0; border-radius: 10px;
        }

        /* Grid System */
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; }

        /* Colors */
        .color-group {
            display: flex; align-items: center; justify-content: space-between;
            background: #f8fafc; padding: 8px 12px; border-radius: 12px; border: 1px solid #e2e8f0;
        }
        input[type="color"] {
            -webkit-appearance: none; border: none; width: 30px; height: 30px; background: none; cursor: pointer;
        }

        /* --- RIGHT PANEL --- */
        .preview-panel { position: sticky; top: 20px; }
        .preview-card {
            background: var(--card-bg); border-radius: 30px; padding: 30px;
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.15); border: 1px solid #fff;
            display: flex; flex-direction: column; align-items: center; text-align: center;
        }

        #canvas {
            background: white; padding: 15px; border-radius: 20px;
            box-shadow: inset 0 0 0 1px #e2e8f0; margin-bottom: 25px;
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        #canvas:hover { transform: scale(1.05) rotate(2deg); }

        /* 3D Buttons */
        .btn-dl {
            width: 100%; padding: 14px; border: none; border-radius: 14px;
            font-weight: 700; color: white; cursor: pointer; position: relative; top: 0;
            display: flex; align-items: center; justify-content: center; gap: 8px;
            transition: all 0.1s; margin-bottom: 10px;
        }
        
        .btn-png { background: #3b82f6; box-shadow: 0 5px 0 #2563eb; }
        .btn-jpg { background: #ec4899; box-shadow: 0 5px 0 #db2777; }
        .btn-svg { background: #10b981; box-shadow: 0 5px 0 #059669; }

        .btn-dl:active { top: 5px; box-shadow: none; }
        
        @media (max-width: 900px) {
            .container { grid-template-columns: 1fr; }
            .preview-panel { position: relative; order: -1; }
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="config-panel">
            <div class="header-box">
                <h1>GenQR Master 3D</h1>
                <p>Kombinasi Bentuk Tak Terbatas & Unik</p>
            </div>

            <div class="card">
                <div class="card-header"><i class="fas fa-magic"></i> <span>Konten & Logo</span></div>
                
                <div style="margin-bottom: 20px;">
                    <label>URL Tujuan</label>
                    <input type="text" id="content" value="https://pictlord.me" placeholder="https://...">
                </div>

                <div class="drop-zone" id="dropZone">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <p id="dropText" style="margin:0; font-weight:700; color:#475569;">Drag & Drop Logo</p>
                    <span style="font-size:0.8rem; color:#94a3b8;">PNG Transparan Recommended</span>
                    <input type="file" id="logoInput" accept="image/*">
                </div>

                <div class="grid-2" style="margin-top:15px;">
                    <div><label>Size</label><input type="range" id="logoSize" min="0.2" max="0.6" step="0.05" value="0.4"></div>
                    <div><label>Margin</label><input type="range" id="logoMargin" min="0" max="20" step="1" value="5"></div>
                </div>
            </div>

            <div class="card">
                <div class="card-header"><i class="fas fa-shapes"></i> <span>Kustomisasi Bentuk</span></div>
                
                <div style="margin-bottom: 15px;">
                    <label>Pola Utama (Body Pattern)</label>
                    <select id="dotStyle">
                        <option value="square">◼️ Mosaic (Square)</option>
                        <option value="dots">● Stardust (Dots)</option>
                        <option value="rounded">▮ Rain (Rounded)</option>
                        <option value="extra-rounded">⬤ Bubble (Bulat)</option>
                        <option value="classy">◆ Classy (Elegan)</option>
                        <option value="classy-rounded">✿ Leaf (Daun)</option>
                    </select>
                </div>

                <div class="grid-2">
                    <div>
                        <label>Bingkai Mata (Outer)</label>
                        <select id="cornerSquareStyle">
                            <option value="extra-rounded">Rounded</option>
                            <option value="square">Kotak Tajam</option>
                            <option value="dot">Lingkaran</option>
                        </select>
                    </div>
                    <div>
                        <label>Bola Mata (Inner)</label>
                        <select id="cornerDotStyle">
                            <option value="dot">Lingkaran</option>
                            <option value="square">Kotak</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header"><i class="fas fa-palette"></i> <span>Warna Premium</span></div>
                
                <div class="grid-3">
                    <div>
                        <label>Pola</label>
                        <div class="color-group">
                            <input type="color" id="colorDots" value="#1e293b">
                        </div>
                    </div>
                    <div>
                        <label>Mata</label>
                        <div class="color-group">
                            <input type="color" id="colorCorners" value="#4f46e5">
                        </div>
                    </div>
                    <div>
                        <label>Latar</label>
                        <div class="color-group">
                            <input type="color" id="colorBg" value="#ffffff">
                        </div>
                    </div>
                </div>
                <p style="font-size: 0.75rem; color: #94a3b8; margin-top: 10px;">*Tips: Gunakan warna 'Mata' yang kontras dengan 'Pola' agar unik.</p>
            </div>
        </div>

        <div class="preview-panel">
            <div class="preview-card">
                <h3 style="margin-top:0; color:#64748b;">Hasil Live</h3>
                <div id="canvas"></div>
                
                <div style="width:100%;">
                    <button class="btn-dl btn-png" onclick="downloadQR('png')"><i class="fas fa-download"></i> Unduh PNG</button>
                    <button class="btn-dl btn-jpg" onclick="downloadQR('jpeg')"><i class="fas fa-image"></i> Unduh JPG</button>
                    <button class="btn-dl btn-svg" onclick="downloadQR('svg')"><i class="fas fa-bezier-curve"></i> Unduh SVG</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let uploadedLogo = "";
        
        const qrCode = new QRCodeStyling({
            width: 300, height: 300, type: "svg",
            data: "https://pictlord.me",
            image: "",
            qrOptions: { errorCorrectionLevel: 'H' },
            dotsOptions: { color: "#1e293b", type: "classy-rounded" }, // Default cantik
            backgroundOptions: { color: "#ffffff" },
            cornersSquareOptions: { type: "extra-rounded", color: "#4f46e5" }, // Warna mata beda
            cornersDotOptions: { type: "dot", color: "#4f46e5" }, // Warna bola mata
            imageOptions: { crossOrigin: "anonymous", margin: 5, imageSize: 0.4 }
        });

        qrCode.append(document.getElementById("canvas"));

        function updateQR() {
            const dotColor = document.getElementById("colorDots").value;
            const cornerColor = document.getElementById("colorCorners").value; // Warna khusus mata

            qrCode.update({
                data: document.getElementById("content").value,
                image: uploadedLogo,
                dotsOptions: {
                    color: dotColor,
                    type: document.getElementById("dotStyle").value
                },
                backgroundOptions: {
                    color: document.getElementById("colorBg").value
                },
                cornersSquareOptions: {
                    type: document.getElementById("cornerSquareStyle").value,
                    color: cornerColor // Set warna bingkai
                },
                cornersDotOptions: {
                    type: document.getElementById("cornerDotStyle").value,
                    color: cornerColor // Set warna bola mata sama dengan bingkai
                },
                imageOptions: {
                    imageSize: parseFloat(document.getElementById("logoSize").value),
                    margin: parseInt(document.getElementById("logoMargin").value)
                }
            });
        }

        // --- Drag & Drop Handling ---
        const dropZone = document.getElementById('dropZone');
        const logoInput = document.getElementById('logoInput');
        const dropText = document.getElementById('dropText');

        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropZone.addEventListener(eventName, e => { e.preventDefault(); e.stopPropagation(); }, false);
        });

        ['dragenter', 'dragover'].forEach(name => dropZone.addEventListener(name, () => dropZone.classList.add('has-file'), false));
        ['dragleave'].forEach(name => dropZone.addEventListener(name, () => dropZone.classList.remove('has-file'), false));

        dropZone.addEventListener('drop', e => {
            handleFiles(e.dataTransfer.files);
        });
        
        logoInput.addEventListener('change', e => handleFiles(e.target.files));

        function handleFiles(files) {
            if (files.length > 0 && files[0].type.startsWith('image/')) {
                const reader = new FileReader();
                reader.onload = e => {
                    uploadedLogo = e.target.result;
                    updateQR();
                    dropText.innerText = "Logo: " + files[0].name.substring(0, 15) + "...";
                    dropZone.querySelector('i').className = "fas fa-check-circle";
                    dropZone.querySelector('i').style.color = "#10b981";
                    dropZone.classList.add('has-file');
                }
                reader.readAsDataURL(files[0]);
            }
        }

        function downloadQR(format) {
            qrCode.download({ name: "Get-Qr", extension: format });
        }

        // Listeners
        const inputs = ["content", "dotStyle", "cornerSquareStyle", "cornerDotStyle", "colorDots", "colorCorners", "colorBg", "logoSize", "logoMargin"];
        inputs.forEach(id => {
            const el = document.getElementById(id);
            if(el) el.addEventListener(el.type === "text" ? "keyup" : "input", updateQR);
        });

    </script>
</body>
</html>